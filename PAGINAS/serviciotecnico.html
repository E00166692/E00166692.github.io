<!DOCTYPE html>
<html lang="es">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Servicio Técnico</title>
	<link rel="icon" href="../IMAGENES/javatech.ico">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
	<link rel="stylesheet" href="../CSS/style-serviciotecnico.css">
	<link rel="stylesheet" href="../CSS/estilos.css">
	<!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous"> -->
	<SCript>
        function aviso()
        {
            alert("Bienvenid@ al servicio técnico de JavaTech, estamos para ayudarte.");
        }
    </SCript>


</head>

<body>

    <header >
		
        <nav>
            <div class="neon1">
                <span id="span5"></span>
                <span id="span6"></span>
                <span id="span8"></span>
                <a href="../index.html" >JAVATECH <i class="fas fa-regular fa-location-dot" ></i></a>
            </div>

            <div class="neon1">
                <span id="span5"></span>
                <span id="span6"></span>
                <span id="span8"></span>
                <a href="./Sucursales.html">SEDES <i class="fas fa-regular fa-location-dot "></i></a>
            </div>


            <div class="neon1">
                <span id="span5"></span>
                <span id="span6"></span>
                <span id="span8"></span>
                <a href="./serviciotecnico.html">SERVICIO TECNICO <i class="fas fa-regular fa-display"></i></a>
            </div>

            <div class="neon1">
                <span id="span5"></span>
                <span id="span6"></span>
                <span id="span8"></span>
                <a href="./tienda.html">TIENDA <i class="fas fa-solid fa-shop"></i></a>
            </div>
			<div class="neon1">
                <span id="span5"></span>
                <span id="span6"></span>
                <span id="span8"></span>
                <a href="./usuarios.html ">LOG-IN </i></a>
            </div>

			

            <!--<div class="neon1">
                <span id="span5"></span>
                <span id="span6"></span>
                <span id="span8"></span>
                <a href="#">CARRITO <i class="fas fa-duotone fa-cart-shopping"></i></a> 
            </div>-->
        </nav>
    </header>


    <div id="container-group" style=" display:flex; gap: 10px; flex-wrap: wrap; justify-content: center; ">
        <div class="row">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-body">
                        <form id="task-form" name="form" action="" class="form-serviciotecnico">
                            <h1>Contáctenos</h1>
                            <p>Completa el siguiente formulario para poder ayudarte.</p>
                            <label for="noma">Nombre:</label>
                            <div class="form-group">
                                <input type="text" class="form-control" id="nom" autofocus
                                    placeholder="Ejem: Enrique Esteban:" pattern="[A-Za-záéíóúÁÉÍÓÚñÑ .-_]{1,200}"
                                    required>
                            </div>
                            <label for="ape">Apellido:</label>
                            <div class="form-group">
                                <input type="text" id="ape" class="form-control" autofocus
                                    placeholder="Ejem: Aguilar Flores:"></input>
                            </div>
                            <label for=" mail">Email:</label>
                            <div class="form-group">
                                <input type="text" class="form-control" id="mail" autofocus
                                    placeholder="Ejem: xxxxx@gmail.com::">
                            </div>
                            <label for="combo_departamento" clas="form-control">Departamentos</label>
                            <select id="combo_departamento" name="combo_departamento">pattern="[A-Za-záéíóúÁÉÍÓÚñÑ
                                \-]{1,40}
                                <option value="1">Amazonas</option>
                                <option value="2">Ancash</option>
                                <option value="3">Apurimac</option>
                                <option value="4">Arequipa</option>
                                <option value="5">Ayacucho</option>
                                <option value="6">Cajamarca</option>
                                <option value="7">Callao</option>
                                <option value="8">Cusco</option>
                                <option value="9">Huancavelica</option>
                                <option value="10">Huánuco</option>
                                <option value="11">Ica</option>
                                <option value="12">Junín</option>
                                <option value="13">La libertad</option>
                                <option value="14">Lambayeque</option>
                                <option value="15">Lima</option>
                                <option value="16">Loreto</option>
                                <option value="17">Madre de Dios</option>
                                <option value="18">Moquegua</option>
                                <option value="19">Pasco</option>
                                <option value="20">Piura</option>
                                <option value="21">Puno</option>
                                <option value="22">San Martín</option>
                                <option value="23">Tacna</option>
                                <option value="24">Tumbes</option>
                                <option value="25">Ucayali</option>
                            </select>
                            <label>Mensaje</label><br>
                            <div class="form-group">
                                <textarea id="msj" class="form-control" placeholder="Problema técnico"
                                    rows="3"></textarea>
                            </div>
                            <button class="btn btn-primary" id="btnGuardar">Guardar</button>

                            <h4>Garantía JAVATECH</h4>
                            <P>Si recibiste un artículo y piensas que está defectuoso, por favor,
                                <br>ponte en contacto con el comercio donde realizaste la compra antes de comenzar la
                                reclamación.
                                <br>¿Sabías? Más del 90% de las consultas por garantía involucran en realidad productos
                                en perfectas
                                condiciones
                                <br>que sólo tienen inconvenientes de configuración, instalación, personalización, etc.
                                ¡Gracias!.
                            </P>
                            <a href="../PAGINAS/terminosycondiciones.html" target="blank" class="boton">Términos y
                                condiciones</a>
                        </form>
                    </div>
                    <div>
                        <div style="background-color:#17202A  ; max-width:800px;">
                            <h1 class="titulo">Preguntas Frecuentes</h1>
                            <div class="categorias" id="categorias">
                                <div class="categoria activa" data-categoria="metodos-pago">
                                    <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd"
                                        clip-rule="evenodd">
                                        <path
                                            d="M21.19 7h2.81v15h-21v-5h-2.81v-15h21v5zm1.81 1h-19v13h19v-13zm-9.5 1c3.036 0 5.5 2.464 5.5 5.5s-2.464 5.5-5.5 5.5-5.5-2.464-5.5-5.5 2.464-5.5 5.5-5.5zm0 1c2.484 0 4.5 2.016 4.5 4.5s-2.016 4.5-4.5 4.5-4.5-2.016-4.5-4.5 2.016-4.5 4.5-4.5zm.5 8h-1v-.804c-.767-.16-1.478-.689-1.478-1.704h1.022c0 .591.326.886.978.886.817 0 1.327-.915-.167-1.439-.768-.27-1.68-.676-1.68-1.693 0-.796.573-1.297 1.325-1.448v-.798h1v.806c.704.161 1.313.673 1.313 1.598h-1.018c0-.788-.727-.776-.815-.776-.55 0-.787.291-.787.622 0 .247.134.497.957.768 1.056.344 1.663.845 1.663 1.746 0 .651-.376 1.288-1.313 1.448v.788zm6.19-11v-4h-19v13h1.81v-9h17.19z" />
                                    </svg>
                                    <p style="color:#154360 ;">Métodos de pago</p>
                                </div>
                                <div class="categoria" data-categoria="entregas">
                                    <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd"
                                        clip-rule="evenodd">
                                        <path
                                            d="M7 24h-5v-9h5v1.735c.638-.198 1.322-.495 1.765-.689.642-.28 1.259-.417 1.887-.417 1.214 0 2.205.499 4.303 1.205.64.214 1.076.716 1.175 1.306 1.124-.863 2.92-2.257 2.937-2.27.357-.284.773-.434 1.2-.434.952 0 1.751.763 1.751 1.708 0 .49-.219.977-.627 1.356-1.378 1.28-2.445 2.233-3.387 3.074-.56.501-1.066.952-1.548 1.393-.749.687-1.518 1.006-2.421 1.006-.405 0-.832-.065-1.308-.2-2.773-.783-4.484-1.036-5.727-1.105v1.332zm-1-8h-3v7h3v-7zm1 5.664c2.092.118 4.405.696 5.999 1.147.817.231 1.761.354 2.782-.581 1.279-1.172 2.722-2.413 4.929-4.463.824-.765-.178-1.783-1.022-1.113 0 0-2.961 2.299-3.689 2.843-.379.285-.695.519-1.148.519-.107 0-.223-.013-.349-.042-.655-.151-1.883-.425-2.755-.701-.575-.183-.371-.993.268-.858.447.093 1.594.35 2.201.52 1.017.281 1.276-.867.422-1.152-.562-.19-.537-.198-1.889-.665-1.301-.451-2.214-.753-3.585-.156-.639.278-1.432.616-2.164.814v3.888zm3.79-19.913l3.21-1.751 7 3.86v7.677l-7 3.735-7-3.735v-7.719l3.784-2.064.002-.005.004.002zm2.71 6.015l-5.5-2.864v6.035l5.5 2.935v-6.106zm1 .001v6.105l5.5-2.935v-6l-5.5 2.83zm1.77-2.035l-5.47-2.848-2.202 1.202 5.404 2.813 2.268-1.167zm-4.412-3.425l5.501 2.864 2.042-1.051-5.404-2.979-2.139 1.166z" />
                                    </svg>
                                    <p style="color:#154360;">Entregas</p>
                                </div>
                                <div class="categoria" data-categoria="seguridad">
                                    <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd"
                                        clip-rule="evenodd">
                                        <path
                                            d="M12 0c-3.371 2.866-5.484 3-9 3v11.535c0 4.603 3.203 5.804 9 9.465 5.797-3.661 9-4.862 9-9.465v-11.535c-3.516 0-5.629-.134-9-3zm0 1.292c2.942 2.31 5.12 2.655 8 2.701v10.542c0 3.891-2.638 4.943-8 8.284-5.375-3.35-8-4.414-8-8.284v-10.542c2.88-.046 5.058-.391 8-2.701zm5 7.739l-5.992 6.623-3.672-3.931.701-.683 3.008 3.184 5.227-5.878.728.685z" />
                                    </svg>
                                    <p style="color:#154360;">Seguridad</p>
                                </div>
                                <div class="categoria" data-categoria="cuenta">
                                    <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd"
                                        clip-rule="evenodd">
                                        <path
                                            d="M9.484 15.696l-.711-.696-2.552 2.607-1.539-1.452-.698.709 2.25 2.136 3.25-3.304zm0-5l-.711-.696-2.552 2.607-1.539-1.452-.698.709 2.25 2.136 3.25-3.304zm0-5l-.711-.696-2.552 2.607-1.539-1.452-.698.709 2.25 2.136 3.25-3.304zm10.516 11.304h-8v1h8v-1zm0-5h-8v1h8v-1zm0-5h-8v1h8v-1zm4-5h-24v20h24v-20zm-1 19h-22v-18h22v18z" />
                                    </svg>
                                    <p style="color:#154360 ;">Cuenta</p>
                                </div>
                            </div>
            
                            <div class="preguntas">
            
                                <!-- Preguntas Metodos de pago -->
                                <div class="contenedor-preguntas activo" data-categoria="metodos-pago">
                                    <div class="contenedor-pregunta">
                                        <p class="pregunta">¿Que métodos de pago disponibles tienen? <img src="../IMAGENES/suma.svg"
                                                alt="Abrir Respuesta" /></p>
                                        <p class="respuesta"> En efectivo y crédito disponemos los siguientes métodos de pago. <span
                                                style="color: #000 ;"><br> * VISA <br>* MASTERCARD<br>* PAYPAL </span> </p>
                                    </div>
                                    <div class="contenedor-pregunta">
                                        <p class="pregunta">¿Tienen plazo de pago? <img src="../IMAGENES/suma.svg"
                                                alt="Abrir Respuesta" /></p>
                                        <p class="respuesta"> tenemos al contado y a crédito (plazo máximo de 30 días). </p>
                                    </div>
                                </div>
            
                                <!-- Preguntas Entregas -->
                                <div class="contenedor-preguntas" data-categoria="entregas">
                                    <div class="contenedor-pregunta">
                                        <p class="pregunta">¿Tienen entregas a domicilio? <img src="../IMAGENES/suma.svg"
                                                alt="Abrir Respuesta" /></p>
                                        <p class="respuesta">Si contamos con entrega a domicilio, con delivery alterno.</p>
                                    </div>
                                    <div class="contenedor-pregunta">
                                        <p class="pregunta">¿En cuanto sale el envio a mi localidad? <img src="../IMAGENES/suma.svg"
                                                alt="Abrir Respuesta" /></p>
                                        <p class="respuesta">Costo varia de acuerdo a courrier.</p>
                                    </div>
                                </div>
            
                                <!-- Preguntas Seguridad -->
                                <div class="contenedor-preguntas" data-categoria="seguridad">
                                    <div class="contenedor-pregunta">
                                        <p class="pregunta">¿Como puedo saber si son confiables? <img src="../IMAGENES/suma.svg"
                                                alt="Abrir Respuesta" /></p>
                                        <p class="respuesta">Tenemos mas de 10 años generando sonrisas a nuestros clientes.</p>
                                    </div>
                                    <div class="contenedor-pregunta">
                                        <p class="pregunta">¿Que pasa con mis datos personales? <img src="../IMAGENES/suma.svg"
                                                alt="Abrir Respuesta" /></p>
                                        <p class="respuesta">Todos los datos de los clientes son confidenciales en nuestra base de
                                            datos.</p>
                                    </div>
                                </div>
            
                                <!-- Preguntas Cuenta -->
                                <div class="contenedor-preguntas" data-categoria="cuenta">
                                    <div class="contenedor-pregunta">
                                        <p class="pregunta">¿Como puedo acceder a mis pedidos? <img src="../IMAGENES/suma.svg"
                                                alt="Abrir Respuesta" /></p>
                                        <p class="respuesta">Visitando nuestra página web o tambien comunicandose por nuestras redes
                                            sociales.</p>
                                    </div>
            
                                </div>
            
            
            
            
                            </div>
                            <div class="circle"> </div>
                        </main>
                    </div>
                </div>
            </div>
            <!-- <div class="col-md-6" id="task-container">

            </div> -->
        </div>
    </div>

    <footer>
        <div class="contenedor-footer">
            <div class="neon">
                <span id="span1"></span>
                <span id="span2"></span>
                <span id="span4"></span>
                <div class="content-foo">
                    <a href="./Sucursales.html">Nuestras Sedes</a>
                </div>
            </div>
            <div class="neon">
                <span id="span1"></span>
                <span id="span2"></span>
                <span id="span4"></span>
                <div class="content-foo">
                    <a href="./terminosycondiciones.html">Servicio Técnico</a>
                </div>
            </div>
            <div class="neon">
                <span id="span1"></span>
                <span id="span2"></span>
                <span id="span4"></span>
                <div class="content-foo">
                    <a href="./terminosycondiciones.html">Términos y Condiciones</a>
                </div>
            </div>
            <div class="neon">
                <span id="span1"></span>
                <span id="span2"></span>
                <span id="span4"></span>
                <div class="content-foo">
                    <a href="./tienda.html">Tienda</a>
                </div>
            </div>

			<div class="neon">
                <span id="span1"></span>
                <span id="span2"></span>
                <span id="span4"></span>
                <div class="content-foo">
                    <a href="./usuarios.html ">Log-in</a>
                </div>
            </div>


        </div>

        <div class="pie-pagina">

            <br>
            <div class="box">
                <h2>SIGUENOS</h2>
                <br>
                <div class="red-social">
                    <a href="#" class="icon"><img src="../IMAGENES/face.svg " alt="F"></a>
                    <a href="#" class="icon"><img src="../IMAGENES/ins.svg" alt="I"></a>
                    <a href="#" class="icon"><img src="../IMAGENES/tw.svg" alt="T"></a>
                    <a href="#" class="icon"><img src="../IMAGENES/you.svg" alt="Y"></a>
                </div>
            </div>
        </div>
        <br><br>
        <div>
            <div class="grupo-1">
                <small> &copy;2022 <b>Javatech</b> - Todos los Derechos Reservados </small>

            </div>


        </div>
        </div>
    </footer>

	<script>
		aviso();
	</script>
    <script src="../JS/serviciotecnico.js"></script>
    <script src="../JS/categorias.js"></script>
    <script src="../JS/preguntasFrecuentes.js"></script>
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.8.4/firebase-app.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
        import { getFirestore, doc, setDoc, addDoc, collection, getDocs, query, onSnapshot, deleteDoc } from "https://www.gstatic.com/firebasejs/9.8.4/firebase-firestore.js";
        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCuVwkMUczdSwcG21TxtWobejJHfriw0J0",
            authDomain: "java-tec.firebaseapp.com",
            projectId: "java-tec",
            storageBucket: "java-tec.appspot.com",
            messagingSenderId: "478339317346",
            appId: "1:478339317346:web:c7fa6289b3fd85f3ab5b3b"
        };
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        // Initialize Cloud Firestore and get a reference to the service
        const db = getFirestore(app);



        const formulario = document.getElementById("task-form");
        var editStatus = false;
        var id = 0;

        formulario.addEventListener("submit", async (e) => {
            //evita refrescar la pagina
            e.preventDefault();

            const nombr = formulario["nom"].value;
            const apellid = formulario["ape"].value;
            const email = formulario["mail"].value;
            const mensaj = formulario["msj"].value;

            //guardar registro
            var docRef;
            if (!editStatus) {
                // Add a new document with a generated id.
                docRef = await addDoc(collection(db, "servicio-tecnico"), {
                    nombre: nombr,
                    apellido: apellid,
                    correo: email,
                    mensaje: mensaj,
                });
            }
            else //guardar edicion
            {
                //console.log(title,description);
                // Add a new document in collection "cities"
                const respuesta = await setDoc(doc(db, "servicio-tecnico", id), {
                    nombre: nombr,
                    apellido: apellid,
                    correo: email,
                    mensaje: mensaj,
                });
                editStatus = false;
                formulario['btnGuardar'].innerText = "Guardar";
            }


            formulario.reset();

            //lista de nuevo la base de datos
        })

        window.addEventListener("DOMContentLoaded", async () => {
            const container = document.getElementById("task-container");

            /*const querySnapshot = await getDocs(collection(db, "servicio-tecnico"));

            querySnapshot.forEach((doc) => {
                // doc.data() is never undefined for query doc snapshots
                console.log(doc.id, " => ", doc.data());
                container.innerHTML =  container.innerHTML +
                "<div class=card card-body mt-2 border-primary>"+
                    "<h3>"+doc.data().nombre+"</h3>"+
                    "<p>"+doc.data().apellido+"</p>"+
                    "<div>"+
                    '<button class="btn btn-primary">Delete</button>'+
                    "</div>"+
                    "</div>";
            });    */


            const q = query(collection(db, "servicio-tecnico"));

            const unsubscribe = onSnapshot(q, (querySnapshot) => {
                container.innerHTML = "";
                querySnapshot.forEach((docu) => {
                    container.innerHTML = container.innerHTML +
                        "<div class='card card-body mt-2 border-primary'>" +
                        "<h3 class='h5'>" + docu.data().nombre + "</h3>" +
                        "<p>" + docu.data().apellido + "</p>" +
                        "</h3>" +
                        "<p>" + docu.data().email + "</p>"
                    "</h3>" +
                        "<p>" + docu.data().mensaj + "</p>"
                    "<div>" +
                        "<button class='btn btn-primary btn-delete' data-id='" + docu.id + "'>Delete</button>" +
                        "<button class='btn btn-secondary btn-edit' data-id='" + docu.id + "'>Edit</button>" +
                        "</div>" +
                        "</div>";

                    const botonesDelete = document.querySelectorAll(".btn-delete");
                    //console.log(botones);
                    botonesDelete.forEach((btn) => {
                        btn.addEventListener("click", async (e) => { await deleteDoc(doc(db, "servicio-tecnico", e.target.dataset.id)); }
                        )
                    })

                    const botonesEdit = document.querySelectorAll(".btn-edit");
                    botonesEdit.forEach((btn) => {
                        btn.addEventListener("click", async (e) => {
                            editStatus = true;
                            id = e.target.dataset.id;
                            const docuRef = doc(db, "servicio-tecnico", e.target.dataset.id);
                            const docuSnap = await getDoc(docuRef);

                            if (docuSnap.exists()) {
                                formulario["nom"].value = docuSnap.data().nombre;
                                formulario["ape"].value = docuSnap.data().apellido;
                                formulario["mail"].value = docuSnap.data().email;
                                formulario["msj"].value = docuSnap.data().mensaj;
                            } else {
                                // doc.data() will be undefined in this case
                                console.log("No such document!");
                            }
                            formulario['btnGuardar'].innerText = "Actualizar";
                        }
                        )
                    })




                });
            });
        });
    </script>
</body>

</html>